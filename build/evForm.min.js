class O{constructor(){this.o=[]}s(e){this.o.push(e)}u(t){this.o=this.o.filter(e=>!(e instanceof t))}notify(t){this.o.forEach(e=>{e.n(t)})}}class evForm extends O{constructor(){super(),this.input=null,this.errors=0,this.evaluates=[{name:"postalCode",msg:"Ingresa 5 digitos",evaluate:function(e){return e.value.length<=4||(5<e.value.length&&(e.value=Number(e.value.toString().slice(0,-1))),!1)}},{name:"number",msg:"Ingresa un nÃºmero",evaluate:function(e){let t=new RegExp(/^[0-9\s]+$/i);return!t.test(e.value)&&(e.value=e.value.replace(/\D/g,""),!0)}},{name:"require",msg:"Este campo es requerido",evaluate:function(e){return""===e.value.replace(/\s/g,"")}},{name:"letters",msg:"Ingresa solo letras",evaluate:function(e){let t=new RegExp(/^[a-zA-Z\s]+$/g);return!t.test(e.value)&&(e.value=e.value.replace(/[0-9]+/g,""),!0)}},{name:"requireCheck",msg:"Este campo es obligatorio ",evaluate:function(e){return!1===e.checked}}]}notify(t){super.notify(t);for(var r=this.evaluates.filter(e=>t.classList.contains(e.name)),s=0,e=r.length;s<e;s+=1){let e=r[s];e.evaluate(t)?this.newMsg(t,e.msg,e.name):this.rmMsg(t,e.name)}}gNS=function(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}};getErrors(){return this.errors}newMsg(t,r,s){if(void 0===this.gNS(t,"."+s)){let e=document.createElement("span");e.textContent=r,e.classList.add("error",s),t.parentNode.appendChild(e),t.classList.add("errorInput"),this.errors++}}rmMsg(e,t){let r=this.gNS(e,"."+t);void 0!==r&&r.classList.contains(t)&&(r.remove(),e.classList.remove("errorInput"),this.errors--)}}let evForm=new evForm,toValidate;function registerValidate(e,t){return(toValidate=document.querySelectorAll("#"+e+" input")).forEach(e=>e.addEventListener("input",e=>{if(evForm.notify(e.target),0===evForm.getErrors()){let e=document.getElementById(t);e.classList.remove("disabled")}})),new Promise((t,e)=>{toValidate.forEach(function(e){evForm.notify(e),t()})})}
